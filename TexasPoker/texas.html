<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>Texas</title>
	</head>
	<style type="text/css">
		.players {
			border: 1px solid #C4C4C4;
			background: #C0CCDA;
		}
	</style>

	<body>
		<button class='addPlayer'>增加玩家</button>
		<button class="dealAll">发牌</button>
		<div class='players'>

		</div>
	</body>
	<script src="js/poker.js" type="text/javascript">
	</script>
	<script type="text/javascript">
		document.querySelector('.addPlayer').addEventListener('click', () => {
			Texas.addPlayer()
		})
		document.querySelector('.dealAll').addEventListener('click',()=>{
			Texas.players.forEach(p=>p.addHand(Texas.deal()))
			Desk.render()
		})
		function desk(model) {
			this.model = model
			this.el = document.querySelector('.players')
			this.init = function() {
				this.model.players.forEach((player) => {
					let dom = document.createElement('div')
					dom.innerHTML = this.playerTemplate
					dom.querySelector('.name').innerText= player.name
					dom.querySelector('.pokers').innerText+= player.cardFace
					player.el = dom
					Object.defineProperty(player,'hand',{
						set:function(nval){
							console.log(nval,'dbbind')
							
//							player.el.querySelector('.pokers').innerText+=nval
						}
					})
				})
			}
			this.render = function() {
				this.model.players.forEach((player)=>{
					console.log('xxx',this.model.players)
					this.el.appendChild(player.el)
				})
			}
			this.playerTemplate = `<div class="player">
			<p class='name'></p>
			<div class='pokers'></div>	
			</div>`
			this.addPlayer = function() {
				this.model.addPlayer()
				let dom = document.createElement('div')
				dom.innerHTML = this.playerTemplate
				dom.querySelector('.name').innerText= player.name
				player.el = dom
			}
		}
		var Desk = new desk(Texas)
		Desk.init()
		Desk.render()
		var a = function (){
			this.ar = []
		}
		console.log(new a())
	</script>

</html>